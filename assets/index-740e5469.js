(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();const u=document.querySelector(".content"),l=document.querySelector(".alert"),c=document.querySelector("#form-ip"),b=[{class:"content__address",title:"IP ADDRESS"},{class:"content__location",title:"LOCATION"},{class:"content__timezone",title:"TIMEZONE"},{class:"content__isp",title:"ISP"}],v=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;let a=L.map("map"),f=!0;u.innerHTML=b.map(t=>`
    <div class="${t.class}">
      <span>${t.title}</span>
      <p></p>
    </div>
  `).join("");const d=({message:t,type:e})=>{l.innerHTML=`<p class='popup__content ${e}'>${t}</p>`,l.classList.add(e),setTimeout(()=>{l.classList.remove(e)},3e3)};c.addEventListener("submit",t=>{t.preventDefault();try{const e=new FormData(c),{ip:s}=Object.fromEntries(e.entries());if(!s)throw{message:"Please introduce a IP",type:"error"};if(!v.test(s))throw{message:"Invalid IP",type:"error"};d({message:"Send successfully",type:"success"}),g(s),c.reset(),f=!1}catch(e){d(e),c.reset()}});navigator.geolocation.getCurrentPosition(t=>{m(t),N()});function m({coords:t}){let{latitude:e,longitude:s}=t;a.setView([e,s],15),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(a),L.marker([e,s]).addTo(a).bindPopup("You are here.").openPopup()}async function N(){try{const t=await fetch("https://api.ipify.org?format=json"),{ip:e}=await t.json();g(e)}catch(t){console.error(t)}}async function g(t){try{const s=await(await fetch(`https://o5g8n7-8080.csb.app/${t}`)).json();console.log("User IP Address:",s);const{ip:i,city:o,timezone:r,org:n,loc:y}=s,h=Object.entries(u.childNodes).map(p=>p[0]%2!==0?p[1].childNodes[3]:null).filter(Boolean),[P,I,O,T]=h;P.textContent=i,I.textContent=o,O.textContent=r,T.textContent=n;const[w,_]=y.split(",").map(parseFloat),E={coords:{latitude:w,longitude:_}};a.invalidateSize(),f||m(E)}catch(e){console.error("Error fetching IP:",e)}}
